% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/summarize_upstream.R
\name{summarize_upstream}
\alias{summarize_upstream}
\title{Summarize Upstream Values}
\usage{
summarize_upstream(
  net = NA,
  summary_type = NA,
  summary_field = NA,
  rca_polygons = NA,
  rca_env_data = NA,
  utm_zone = NA,
  output_fieldname = "field_name"
)
}
\arguments{
\item{net}{A \code{data.frame} representing network relationships between a \code{rid} (stream reach ID) to all upstream \code{rca_id}s. This data.frame must be in long format with two columns (\code{rid} and \code{rca_id}). \code{rid} represents the stream reach ID and \code{rca_id} represents all upstream RCA polygon IDs associated with that reach.}

\item{summary_type}{Character. One of:
\itemize{
\item \code{"total_upstream_area"}
\item \code{"percent_coverage"}
\item \code{"linear_density"}
\item \code{"feature_count"}
\item \code{"area_weighted_mean"}
}}

\item{summary_field}{Character. Name of the field in \code{rca_env_data} to summarize when
\code{summary_type = "area_weighted_mean"}. Ignored for the other summary types.}

\item{rca_polygons}{An \code{sf} object of RCA (reach contributing area) polygons, each with a
unique \code{rca_id} field (e.g. from \code{./network/NICA_rca.gpkg}).}

\item{rca_env_data}{A \code{data.frame} or \code{sf} object of environmental data summarized to the
RCA polygons. Must include a matching \code{rca_id} column.}

\item{utm_zone}{Integer format EPSG code for the local UTM zone (e.g., 26910).
Use \code{getUTMzone()} to determine the correct zone for your \code{sf} object.}

\item{output_fieldname}{Character. Name for the new output column (e.g.
\code{"upstream_basin_elevation"}).}
}
\value{
A \code{data.frame} with the upstream summary values joined back to the stream network.
}
\description{
Accumulator function to calculate values upstream of each stream reach.
}
\details{
The following summary types are available:
\itemize{
\item \strong{total_upstream_area}
Calculates the sum of the area of the upstream RCA polygons.
Useful for total drainage area.
\item \strong{percent_coverage}
Calculates the area of the environmental layer upstream divided by the total upstream basin area (km²/km²).
Useful for land‑cover metrics (e.g. \% agricultural land).
\item \strong{linear_density}
Calculates the total length of linear features upstream divided by the upstream basin area (km/km²).
Common example: road density.
\item \strong{feature_count}
Counts the number of features upstream and divides by the basin area (count/km²).
Examples: number of water licenses or stream crossings per unit area.
\item \strong{area_weighted_mean}
Computes an area‑weighted mean of a continuous variable (e.g. elevation, temperature).
Requires \code{summary_field} to specify which variable to average.
}
}
